# è§£é¡Œè€å¸«ç­è¡¨ç®¡ç†æ¨¡çµ„ - æ“ä½œæ‰‹å†Š

## ç›®éŒ„

1. [æ¨¡çµ„æ¦‚è¿°](#æ¨¡çµ„æ¦‚è¿°)
2. [ç³»çµ±éœ€æ±‚](#ç³»çµ±éœ€æ±‚)
3. [åˆæ¬¡è¨­å®š](#åˆæ¬¡è¨­å®š)
4. [æ¬Šé™é…ç½®](#æ¬Šé™é…ç½®)
5. [ç®¡ç†å“¡æ“ä½œæŒ‡å—](#ç®¡ç†å“¡æ“ä½œæŒ‡å—)
6. [è€å¸«æ“ä½œæŒ‡å—](#è€å¸«æ“ä½œæŒ‡å—)
7. [å­¸ç”Ÿæ“ä½œæŒ‡å—](#å­¸ç”Ÿæ“ä½œæŒ‡å—)
8. [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)
9. [æŠ€è¡“æ”¯æ´](#æŠ€è¡“æ”¯æ´)

---

## æ¨¡çµ„æ¦‚è¿°

### åŠŸèƒ½ç°¡ä»‹

ã€Œè§£é¡Œè€å¸«ç­è¡¨ç®¡ç†æ¨¡çµ„ã€(Tutor Schedule) æ˜¯ä¸€å€‹å°ˆç‚ºè£œç¿’ç­è¨­è¨ˆçš„ Drupal 11 æ¨¡çµ„ï¼Œç”¨æ–¼ç®¡ç†è§£é¡Œè€å¸«çš„å€¼ç­æ™‚æ®µå’Œå­¸ç”Ÿé ç´„è¨˜éŒ„ã€‚

### ä¸»è¦åŠŸèƒ½

- **ç­è¡¨æ™‚æ®µç®¡ç†**ï¼šå»ºç«‹å’Œç®¡ç†è€å¸«çš„å€¼ç­æ™‚æ®µ
- **è§£é¡Œè¨˜éŒ„è¿½è¹¤**ï¼šè¨˜éŒ„å­¸ç”Ÿçš„è§£é¡Œé ç´„å’Œå®Œæˆç‹€æ³
- **æ¬Šé™åˆ†ç´šæ§åˆ¶**ï¼šé‡å°ç®¡ç†å“¡ã€è€å¸«ã€å­¸ç”Ÿã€è¨ªå®¢æä¾›ä¸åŒæ¬Šé™
- **å€‹äººåŒ–æª¢è¦–**ï¼šè€å¸«å¯æŸ¥çœ‹è‡ªå·±çš„ç­è¡¨ï¼Œå­¸ç”Ÿå¯ç€è¦½å¯é ç´„æ™‚æ®µ

### æ ¸å¿ƒå¯¦é«”

1. **Schedule Slot (ç­è¡¨æ™‚æ®µ)**
   - è€å¸«è³‡è¨Š
   - æ—¥æœŸå’Œæ™‚é–“
   - æ•™å®¤ä½ç½®
   - ç§‘ç›®
   - æœ€å¤§å­¸ç”Ÿæ•¸
   - ç™¼å¸ƒç‹€æ…‹

2. **Tutoring Session (è§£é¡Œè¨˜éŒ„)**
   - é—œè¯çš„ç­è¡¨æ™‚æ®µ
   - å­¸ç”Ÿå’Œè€å¸«è³‡è¨Š
   - è§£é¡Œæ—¥æœŸæ™‚é–“
   - å•é¡Œä¸»é¡Œå’Œè§£ç­”ç­†è¨˜
   - ç‹€æ…‹ï¼ˆå·²é ç´„/å·²å®Œæˆ/å·²å–æ¶ˆï¼‰

---

## ç³»çµ±éœ€æ±‚

- Drupal 11.x
- PHP 8.3 æˆ–æ›´é«˜ç‰ˆæœ¬
- å·²å•Ÿç”¨çš„æ ¸å¿ƒæ¨¡çµ„ï¼š
  - User
  - Datetime

---

## åˆæ¬¡è¨­å®š

### 1. å•Ÿç”¨æ¨¡çµ„

ä½¿ç”¨ Drush å‘½ä»¤å•Ÿç”¨æ¨¡çµ„ï¼š

```bash
ddev drush en tutor_schedule -y
ddev drush cr
```

æˆ–é€éç®¡ç†ä»‹é¢ï¼š

1. å‰å¾€ `/admin/modules`
2. æ‰¾åˆ°ã€ŒTutor Scheduleã€æ¨¡çµ„
3. å‹¾é¸ä¸¦é»æ“Šã€ŒInstallã€
4. æ¸…é™¤å¿«å–

### 2. é©—è­‰å®‰è£

æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š

1. å‰å¾€ `/admin/schedule/slots` - æ‡‰è©²èƒ½çœ‹åˆ°ç©ºç™½çš„ç­è¡¨åˆ—è¡¨é é¢
2. å‰å¾€ `/admin/people/permissions` - æœå°‹ "tutor" æ‡‰è©²èƒ½çœ‹åˆ° 13 å€‹æ¬Šé™
3. æª¢æŸ¥è³‡æ–™è¡¨æ˜¯å¦å»ºç«‹ï¼š
   ```bash
   ddev drush sqlq "SHOW TABLES LIKE 'tutor_%'"
   ```
   æ‡‰è©²é¡¯ç¤ºï¼š
   - `tutor_schedule_slot`
   - `tutor_session`

---

## æ¬Šé™é…ç½®

### æ¬Šé™åˆ—è¡¨

æ¨¡çµ„æä¾›ä»¥ä¸‹ 13 å€‹æ¬Šé™ï¼š

#### ç®¡ç†æ¬Šé™
- **Administer tutor schedules** - å®Œæ•´ç®¡ç†æ¬Šé™

#### ç­è¡¨æ™‚æ®µæ¬Šé™
- **Create schedule slots** - å»ºç«‹ç­è¡¨æ™‚æ®µ
- **Edit own schedule slots** - ç·¨è¼¯è‡ªå·±çš„ç­è¡¨
- **Edit any schedule slot** - ç·¨è¼¯ä»»æ„ç­è¡¨
- **Delete own schedule slots** - åˆªé™¤è‡ªå·±çš„ç­è¡¨
- **Delete any schedule slot** - åˆªé™¤ä»»æ„ç­è¡¨
- **View published schedule slots** - æŸ¥çœ‹å·²ç™¼å¸ƒçš„ç­è¡¨
- **View own schedule slots** - æŸ¥çœ‹è‡ªå·±çš„ç­è¡¨
- **View all schedule slots** - æŸ¥çœ‹æ‰€æœ‰ç­è¡¨ï¼ˆåŒ…å«æœªç™¼å¸ƒï¼‰

#### è§£é¡Œè¨˜éŒ„æ¬Šé™
- **Create tutoring sessions** - å»ºç«‹è§£é¡Œè¨˜éŒ„
- **Edit own tutoring sessions** - ç·¨è¼¯è‡ªå·±ç›¸é—œçš„è§£é¡Œè¨˜éŒ„
- **View own tutoring sessions** - æŸ¥çœ‹è‡ªå·±ç›¸é—œçš„è§£é¡Œè¨˜éŒ„
- **View all tutoring sessions** - æŸ¥çœ‹æ‰€æœ‰è§£é¡Œè¨˜éŒ„

### å»ºè­°çš„è§’è‰²é…ç½®

#### 1. ç®¡ç†å“¡è§’è‰² (Administrator)

å‰å¾€ `/admin/people/permissions`ï¼Œç‚ºã€Œç®¡ç†å“¡ã€è§’è‰²å‹¾é¸ï¼š

- âœ… Administer tutor schedules
- âœ… æ‰€æœ‰å…¶ä»–æ¬Šé™ï¼ˆå»ºè­°å…¨é¸ï¼‰

#### 2. è€å¸«è§’è‰² (Teacher)

**ç¬¬ä¸€æ­¥ï¼šå»ºç«‹è€å¸«è§’è‰²**

1. å‰å¾€ `/admin/people/roles`
2. é»æ“Šã€ŒAdd roleã€
3. è§’è‰²åç¨±è¼¸å…¥ï¼š`teacher`
4. æ¨™ç±¤è¼¸å…¥ï¼š`è€å¸«`
5. å„²å­˜

**ç¬¬äºŒæ­¥ï¼šè¨­å®šæ¬Šé™**

å‰å¾€ `/admin/people/permissions`ï¼Œç‚ºã€Œè€å¸«ã€è§’è‰²å‹¾é¸ï¼š

- âœ… Create schedule slots
- âœ… Edit own schedule slots
- âœ… Delete own schedule slots
- âœ… View own schedule slots
- âœ… View own tutoring sessions
- âœ… Edit own tutoring sessions

#### 3. å­¸ç”Ÿè§’è‰² (Student)

**ç¬¬ä¸€æ­¥ï¼šå»ºç«‹å­¸ç”Ÿè§’è‰²**

1. å‰å¾€ `/admin/people/roles`
2. é»æ“Šã€ŒAdd roleã€
3. è§’è‰²åç¨±è¼¸å…¥ï¼š`student`
4. æ¨™ç±¤è¼¸å…¥ï¼š`å­¸ç”Ÿ`
5. å„²å­˜

**ç¬¬äºŒæ­¥ï¼šè¨­å®šæ¬Šé™**

å‰å¾€ `/admin/people/permissions`ï¼Œç‚ºã€Œå­¸ç”Ÿã€è§’è‰²å‹¾é¸ï¼š

- âœ… View published schedule slots
- âœ… Create tutoring sessions
- âœ… View own tutoring sessions

#### 4. åŒ¿åä½¿ç”¨è€… (Anonymous User)

å‰å¾€ `/admin/people/permissions`ï¼Œç‚ºã€ŒåŒ¿åä½¿ç”¨è€…ã€è§’è‰²å‹¾é¸ï¼š

- âœ… View published schedule slotsï¼ˆå¦‚æœå¸Œæœ›è¨ªå®¢å¯ä»¥æŸ¥çœ‹ç­è¡¨ï¼‰

---

## ç®¡ç†å“¡æ“ä½œæŒ‡å—

### 1. ç®¡ç†ç­è¡¨æ™‚æ®µ

#### æŸ¥çœ‹æ‰€æœ‰ç­è¡¨æ™‚æ®µ

1. å‰å¾€ `/admin/schedule/slots`
2. æ‚¨å¯ä»¥çœ‹åˆ°æ‰€æœ‰å·²å»ºç«‹çš„ç­è¡¨æ™‚æ®µåˆ—è¡¨
3. åˆ—è¡¨é¡¯ç¤ºï¼šIDã€æ¨™é¡Œã€è€å¸«ã€æ—¥æœŸã€æ™‚é–“ã€æ•™å®¤ã€ç§‘ç›®ã€ç‹€æ…‹

#### æ–°å¢ç­è¡¨æ™‚æ®µ

1. å‰å¾€ `/admin/schedule/slots`
2. é»æ“Šã€ŒAdd Schedule Slotã€æŒ‰éˆ•
3. å¡«å¯«è¡¨å–®ï¼š
   - **Title (æ¨™é¡Œ)** - å¿…å¡«ï¼Œä¾‹å¦‚ï¼šã€Œé€±ä¸€ 14:00 - æ•¸å­¸è§£é¡Œã€
   - **Tutor (è€å¸«)** - å¿…å¡«ï¼Œé–‹å§‹è¼¸å…¥è€å¸«åç¨±æœƒè‡ªå‹•å®Œæˆ
   - **Schedule Date (ç­è¡¨æ—¥æœŸ)** - å¿…å¡«ï¼Œé¸æ“‡æ—¥æœŸ
   - **Start Time (é–‹å§‹æ™‚é–“)** - å¿…å¡«ï¼Œé¸æ“‡æ—¥æœŸå’Œæ™‚é–“
   - **End Time (çµæŸæ™‚é–“)** - å¿…å¡«ï¼Œé¸æ“‡æ—¥æœŸå’Œæ™‚é–“
   - **Classroom (æ•™å®¤)** - é¸å¡«ï¼Œä¾‹å¦‚ï¼šã€ŒA101ã€
   - **Subject (ç§‘ç›®)** - é¸å¡«ï¼Œä¾‹å¦‚ï¼šã€Œæ•¸å­¸ã€ã€ã€Œç‰©ç†ã€
   - **Maximum Students (æœ€å¤§å­¸ç”Ÿæ•¸)** - é è¨­ç‚º 1
   - **Published (ç™¼å¸ƒç‹€æ…‹)** - å‹¾é¸å¾Œå­¸ç”Ÿæ‰èƒ½çœ‹åˆ°æ­¤ç­è¡¨
4. é»æ“Šã€ŒSaveã€å„²å­˜

#### ç·¨è¼¯ç­è¡¨æ™‚æ®µ

1. å‰å¾€ `/admin/schedule/slots`
2. é»æ“Šè¦ç·¨è¼¯çš„ç­è¡¨æ¨™é¡Œ
3. é»æ“Šã€ŒEditã€æ¨™ç±¤
4. ä¿®æ”¹æ¬„ä½
5. é»æ“Šã€ŒSaveã€å„²å­˜

#### åˆªé™¤ç­è¡¨æ™‚æ®µ

1. å‰å¾€ `/admin/schedule/slots`
2. æ‰¾åˆ°è¦åˆªé™¤çš„ç­è¡¨ï¼Œé»æ“Šã€ŒEditã€
3. é»æ“Šã€ŒDeleteã€æ¨™ç±¤
4. ç¢ºèªåˆªé™¤

### 2. ç®¡ç†è§£é¡Œè¨˜éŒ„

#### æŸ¥çœ‹æ‰€æœ‰è§£é¡Œè¨˜éŒ„

1. å‰å¾€ `/admin/schedule/sessions`
2. æ‚¨å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„è§£é¡Œè¨˜éŒ„åˆ—è¡¨
3. åˆ—è¡¨é¡¯ç¤ºï¼šIDã€æ¨™é¡Œã€å­¸ç”Ÿã€è€å¸«ã€è§£é¡Œæ—¥æœŸã€ç‹€æ…‹

#### æ–°å¢è§£é¡Œè¨˜éŒ„

1. å‰å¾€ `/admin/schedule/sessions`
2. é»æ“Šã€ŒBook Sessionã€æŒ‰éˆ•
3. å¡«å¯«è¡¨å–®ï¼š
   - **Title (æ¨™é¡Œ)** - å¿…å¡«
   - **Schedule Slot (é—œè¯ç­è¡¨)** - é¸å¡«ï¼Œå¯é—œè¯åˆ°ç‰¹å®šç­è¡¨æ™‚æ®µ
   - **Student (å­¸ç”Ÿ)** - å¿…å¡«ï¼Œé¸æ“‡å­¸ç”Ÿ
   - **Tutor (è€å¸«)** - å¿…å¡«ï¼Œé¸æ“‡è€å¸«
   - **Session Date (è§£é¡Œæ—¥æœŸ)** - å¿…å¡«
   - **Duration (æ™‚é•·)** - é è¨­ 60 åˆ†é˜
   - **Topic (å•é¡Œä¸»é¡Œ)** - é¸å¡«ï¼Œæè¿°å­¸ç”Ÿçš„å•é¡Œ
   - **Notes (è§£é¡Œç­†è¨˜)** - é¸å¡«ï¼Œè¨˜éŒ„è§£é¡Œéç¨‹
   - **Status (ç‹€æ…‹)** - é¸æ“‡ï¼šå·²é ç´„/å·²å®Œæˆ/å·²å–æ¶ˆ
4. é»æ“Šã€ŒSaveã€å„²å­˜

#### ç·¨è¼¯/åˆªé™¤è§£é¡Œè¨˜éŒ„

æ“ä½œæ–¹å¼èˆ‡ç­è¡¨æ™‚æ®µç›¸åŒã€‚

### 3. ç®¡ç†ä½¿ç”¨è€…

#### å»ºç«‹è€å¸«å¸³è™Ÿ

1. å‰å¾€ `/admin/people`
2. é»æ“Šã€ŒAdd userã€
3. å¡«å¯«ä½¿ç”¨è€…è³‡è¨Š
4. åœ¨ã€ŒRolesã€å‹¾é¸ã€Œè€å¸«ã€
5. å„²å­˜

#### å»ºç«‹å­¸ç”Ÿå¸³è™Ÿ

1. å‰å¾€ `/admin/people`
2. é»æ“Šã€ŒAdd userã€
3. å¡«å¯«ä½¿ç”¨è€…è³‡è¨Š
4. åœ¨ã€ŒRolesã€å‹¾é¸ã€Œå­¸ç”Ÿã€
5. å„²å­˜

---

## è€å¸«æ“ä½œæŒ‡å—

### 1. æŸ¥çœ‹å€‹äººç­è¡¨

**æ–¹æ³•ä¸€ï¼šé€éé¸å–®**

1. ç™»å…¥å¾Œï¼Œé»æ“Šä½¿ç”¨è€…é¸å–®
2. é¸æ“‡ã€ŒMy Teaching Schedule (æˆ‘çš„æ•™å­¸ç­è¡¨)ã€
3. æŸ¥çœ‹è‡ªå·±çš„æ‰€æœ‰ç­è¡¨æ™‚æ®µ

**æ–¹æ³•äºŒï¼šç›´æ¥è¨ªå•**

ç›´æ¥å‰å¾€ `/schedule/my-schedule`

### 2. å»ºç«‹è‡ªå·±çš„ç­è¡¨æ™‚æ®µ

1. å‰å¾€ `/admin/schedule/slot/add`
2. å¡«å¯«ç­è¡¨è³‡è¨Šï¼ˆç³»çµ±æœƒè‡ªå‹•å°‡æ‚¨è¨­ç‚ºè€å¸«ï¼‰
3. é‡è¦æé†’ï¼š
   - ç¢ºä¿ã€ŒTutorã€æ¬„ä½é¸æ“‡çš„æ˜¯æ‚¨è‡ªå·±
   - å‹¾é¸ã€ŒPublishedã€æ‰æœƒè®“å­¸ç”Ÿçœ‹åˆ°
4. å„²å­˜å¾Œï¼Œå­¸ç”Ÿå°±èƒ½åœ¨ã€Œå¯é ç´„æ™‚æ®µã€ä¸­çœ‹åˆ°æ­¤ç­è¡¨

### 3. ç·¨è¼¯è‡ªå·±çš„ç­è¡¨

1. å‰å¾€ `/schedule/my-schedule`
2. é»æ“Šè¦ç·¨è¼¯çš„ç­è¡¨
3. é»æ“Šã€ŒEditã€æ¨™ç±¤
4. ä¿®æ”¹å¾Œå„²å­˜

**æ¬Šé™é™åˆ¶ï¼š**
- âœ… æ‚¨åªèƒ½ç·¨è¼¯è‡ªå·±å»ºç«‹çš„ç­è¡¨
- âŒ æ‚¨ç„¡æ³•ç·¨è¼¯å…¶ä»–è€å¸«çš„ç­è¡¨

### 4. æŸ¥çœ‹è§£é¡Œè¨˜éŒ„

1. é»æ“Šæ‚¨æƒ³æŸ¥çœ‹çš„ç­è¡¨æ™‚æ®µ
2. æŸ¥çœ‹èˆ‡æ­¤æ™‚æ®µç›¸é—œçš„è§£é¡Œè¨˜éŒ„
3. æ‚¨å¯ä»¥çœ‹åˆ°å“ªäº›å­¸ç”Ÿé ç´„äº†æ‚¨çš„æ™‚æ®µ

### 5. æ›´æ–°è§£é¡Œè¨˜éŒ„

1. å‰å¾€è§£é¡Œè¨˜éŒ„é é¢
2. é»æ“Šã€ŒEditã€
3. æ‚¨å¯ä»¥ï¼š
   - æ›´æ–°ã€ŒNotes (è§£é¡Œç­†è¨˜)ã€
   - å°‡ç‹€æ…‹å¾ã€ŒScheduled (å·²é ç´„)ã€æ”¹ç‚ºã€ŒCompleted (å·²å®Œæˆ)ã€
   - è¨˜éŒ„è§£é¡Œçš„è©³ç´°å…§å®¹

---

## å­¸ç”Ÿæ“ä½œæŒ‡å—

### 1. ç€è¦½å¯é ç´„æ™‚æ®µ

**æ–¹æ³•ä¸€ï¼šé€éé¸å–®**

1. ç™»å…¥å¾Œï¼Œé»æ“Šä¸»é¸å–®
2. é¸æ“‡ã€ŒBook Tutoring (é ç´„è§£é¡Œ)ã€

**æ–¹æ³•äºŒï¼šç›´æ¥è¨ªå•**

ç›´æ¥å‰å¾€ `/schedule/available`

**é¡¯ç¤ºå…§å®¹ï¼š**
- æ‰€æœ‰å·²ç™¼å¸ƒçš„æœªä¾†ç­è¡¨æ™‚æ®µ
- è€å¸«è³‡è¨Š
- æ™‚é–“å’Œåœ°é»
- ç§‘ç›®

### 2. é ç´„è§£é¡Œæ™‚æ®µ

**æ­¥é©Ÿï¼š**

1. å‰å¾€ `/schedule/available` ç€è¦½å¯é ç´„æ™‚æ®µ
2. è¨˜ä¸‹æ‚¨æƒ³é ç´„çš„è€å¸«å’Œæ™‚æ®µè³‡è¨Š
3. å‰å¾€ `/schedule/session/add`
4. å¡«å¯«é ç´„è¡¨å–®ï¼š
   - **Title (æ¨™é¡Œ)** - å¿…å¡«ï¼Œä¾‹å¦‚ï¼šã€Œæ•¸å­¸å¾®ç©åˆ†å•é¡Œã€
   - **Schedule Slot (ç­è¡¨æ™‚æ®µ)** - é¸å¡«ï¼Œå¯é¸æ“‡ç‰¹å®šç­è¡¨
   - **Student (å­¸ç”Ÿ)** - ç³»çµ±æœƒè‡ªå‹•å¡«å…¥æ‚¨çš„å¸³è™Ÿ
   - **Tutor (è€å¸«)** - é¸æ“‡è¦é ç´„çš„è€å¸«
   - **Session Date (è§£é¡Œæ—¥æœŸ)** - é¸æ“‡é ç´„æ™‚é–“
   - **Duration (æ™‚é•·)** - é è¨­ 60 åˆ†é˜
   - **Topic (å•é¡Œä¸»é¡Œ)** - æè¿°æ‚¨çš„å•é¡Œï¼Œä¾‹å¦‚ï¼š
     ```
     å¾®ç©åˆ†ç¬¬ä¸‰ç« ç·´ç¿’é¡Œç¬¬ 15 é¡Œ
     é—œæ–¼å®šç©åˆ†çš„è¨ˆç®—æ–¹æ³•ä¸å¤ªç†è§£
     ```
   - **Status (ç‹€æ…‹)** - ä¿æŒã€ŒScheduled (å·²é ç´„)ã€
5. é»æ“Šã€ŒSaveã€å®Œæˆé ç´„

### 3. æŸ¥çœ‹è‡ªå·±çš„é ç´„è¨˜éŒ„

**æŸ¥çœ‹æ–¹æ³•ï¼š**

1. å‰å¾€æ‚¨å»ºç«‹çš„è§£é¡Œè¨˜éŒ„é é¢
2. æ‚¨å¯ä»¥çœ‹åˆ°ï¼š
   - é ç´„ç‹€æ…‹
   - è€å¸«è³‡è¨Š
   - é ç´„æ™‚é–“
   - æ‚¨æäº¤çš„å•é¡Œ
   - è€å¸«çš„è§£é¡Œç­†è¨˜ï¼ˆå¦‚æœè€å¸«å·²å¡«å¯«ï¼‰

**æ¬Šé™é™åˆ¶ï¼š**
- âœ… æ‚¨åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è§£é¡Œè¨˜éŒ„
- âŒ æ‚¨ç„¡æ³•æŸ¥çœ‹å…¶ä»–å­¸ç”Ÿçš„è¨˜éŒ„

### 4. å–æ¶ˆé ç´„

1. å‰å¾€æ‚¨çš„è§£é¡Œè¨˜éŒ„é é¢
2. é»æ“Šã€ŒEditã€
3. å°‡ã€ŒStatus (ç‹€æ…‹)ã€æ”¹ç‚ºã€ŒCancelled (å·²å–æ¶ˆ)ã€
4. å„²å­˜

---

## å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒ

### æƒ…å¢ƒ 1ï¼šè€å¸«è¨­å®šæ¯é€±å›ºå®šç­è¡¨

**ç›®æ¨™ï¼š** å¼µè€å¸«æƒ³è¨­å®šæ¯é€±ä¸€åˆ°é€±äº”ä¸‹åˆ 2-4 é»çš„æ•¸å­¸è§£é¡Œæ™‚æ®µ

**æ­¥é©Ÿï¼š**

1. ä»¥è€å¸«èº«ä»½ç™»å…¥
2. å‰å¾€ `/admin/schedule/slot/add`
3. å»ºç«‹ç¬¬ä¸€å€‹ç­è¡¨ï¼š
   - Title: ã€Œé€±ä¸€ 14:00-16:00 æ•¸å­¸è§£é¡Œã€
   - Tutor: å¼µè€å¸«
   - Schedule Date: é¸æ“‡ä¸‹é€±ä¸€
   - Start Time: 14:00
   - End Time: 16:00
   - Classroom: A101
   - Subject: æ•¸å­¸
   - Maximum Students: 3
   - Published: âœ… å‹¾é¸
4. é‡è¤‡æ­¥é©Ÿ 3ï¼Œå»ºç«‹é€±äºŒåˆ°é€±äº”çš„ç­è¡¨
5. å‰å¾€ `/schedule/my-schedule` ç¢ºèªæ‰€æœ‰ç­è¡¨å·²å»ºç«‹

### æƒ…å¢ƒ 2ï¼šå­¸ç”Ÿé ç´„è§£é¡Œ

**ç›®æ¨™ï¼š** æåŒå­¸æƒ³é ç´„å¼µè€å¸«çš„æ•¸å­¸è§£é¡Œæ™‚æ®µ

**æ­¥é©Ÿï¼š**

1. ä»¥å­¸ç”Ÿèº«ä»½ç™»å…¥
2. å‰å¾€ `/schedule/available` ç€è¦½å¯ç”¨æ™‚æ®µ
3. æ‰¾åˆ°å¼µè€å¸«çš„ã€Œé€±ä¸€ 14:00-16:00 æ•¸å­¸è§£é¡Œã€
4. å‰å¾€ `/schedule/session/add`
5. å¡«å¯«é ç´„ï¼š
   - Title: ã€Œå¾®ç©åˆ†å•é¡Œè«®è©¢ã€
   - Student: æåŒå­¸ï¼ˆè‡ªå‹•å¡«å…¥ï¼‰
   - Tutor: å¼µè€å¸«
   - Session Date: é¸æ“‡ä¸‹é€±ä¸€ 14:30
   - Duration: 30
   - Topic: ã€Œå¾®ç©åˆ†ç¬¬äº”ç« å®šç©åˆ†è¨ˆç®—å•é¡Œã€
   - Status: Scheduled
6. å„²å­˜å¾Œç­‰å¾…è€å¸«ç¢ºèª

### æƒ…å¢ƒ 3ï¼šè€å¸«å®Œæˆè§£é¡Œä¸¦è¨˜éŒ„

**ç›®æ¨™ï¼š** å¼µè€å¸«å®ŒæˆæåŒå­¸çš„è§£é¡Œï¼Œè¦è¨˜éŒ„è§£é¡Œå…§å®¹

**æ­¥é©Ÿï¼š**

1. ä»¥è€å¸«èº«ä»½ç™»å…¥
2. å‰å¾€ç›¸é—œçš„è§£é¡Œè¨˜éŒ„é é¢
3. é»æ“Šã€ŒEditã€
4. å¡«å¯«ã€ŒNotes (è§£é¡Œç­†è¨˜)ã€ï¼š
   ```
   å•é¡Œï¼šå®šç©åˆ†è¨ˆç®—ä¸­çš„æ›å…ƒæ³•

   è§£ç­”è¦é»ï¼š
   1. èªªæ˜äº†æ›å…ƒæ³•çš„åŸºæœ¬åŸç†
   2. ç¤ºç¯„äº†ä¸‰å€‹ä¾‹é¡Œ
   3. æé†’æ³¨æ„ä¸Šä¸‹é™çš„è½‰æ›

   å­¸ç”Ÿç†è§£ç‹€æ³ï¼šè‰¯å¥½
   å»ºè­°ï¼šå¤šåšç·´ç¿’é¡Œéå›º
   ```
5. å°‡ã€ŒStatusã€æ”¹ç‚ºã€ŒCompleted (å·²å®Œæˆ)ã€
6. å„²å­˜

### æƒ…å¢ƒ 4ï¼šç®¡ç†å“¡æŸ¥çœ‹çµ±è¨ˆè³‡æ–™

**ç›®æ¨™ï¼š** ç®¡ç†å“¡æƒ³æŸ¥çœ‹æœ¬é€±æœ‰å¤šå°‘è§£é¡Œé ç´„

**æ­¥é©Ÿï¼š**

1. ä»¥ç®¡ç†å“¡èº«ä»½ç™»å…¥
2. å‰å¾€ `/admin/schedule/sessions`
3. æŸ¥çœ‹æ‰€æœ‰è§£é¡Œè¨˜éŒ„åˆ—è¡¨
4. å¯ä»¥çœ‹åˆ°ï¼š
   - ç¸½é ç´„æ•¸
   - å„è€å¸«çš„é ç´„åˆ†ä½ˆ
   - å®Œæˆç‡
   - ç†±é–€ç§‘ç›®

---

## å¸¸è¦‹å•é¡Œ

### Q1: ç‚ºä»€éº¼æˆ‘å»ºç«‹çš„ç­è¡¨å­¸ç”Ÿçœ‹ä¸åˆ°ï¼Ÿ

**A:** è«‹æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š

1. ç¢ºèªç­è¡¨çš„ã€ŒPublished (ç™¼å¸ƒç‹€æ…‹)ã€å·²å‹¾é¸
2. ç¢ºèªç­è¡¨çš„ã€ŒSchedule Date (æ—¥æœŸ)ã€æ˜¯æœªä¾†çš„æ—¥æœŸ
3. ç¢ºèªå­¸ç”Ÿè§’è‰²æœ‰ã€ŒView published schedule slotsã€æ¬Šé™
4. æ¸…é™¤å¿«å–ï¼š`ddev drush cr`

### Q2: è€å¸«ç„¡æ³•ç·¨è¼¯è‡ªå·±çš„ç­è¡¨ï¼Ÿ

**A:** è«‹æª¢æŸ¥ï¼š

1. è€å¸«è§’è‰²æ˜¯å¦æœ‰ã€ŒEdit own schedule slotsã€æ¬Šé™
2. ç¢ºèªè¦ç·¨è¼¯çš„ç­è¡¨ã€ŒTutor (è€å¸«)ã€æ¬„ä½æ˜¯è©²è€å¸«æœ¬äºº
3. å¦‚æœç­è¡¨æ˜¯ç®¡ç†å“¡å»ºç«‹çš„ï¼Œéœ€è¦ç®¡ç†å“¡å°‡ã€ŒTutorã€æ”¹ç‚ºè©²è€å¸«

### Q3: å¦‚ä½•é™åˆ¶æ¯å€‹æ™‚æ®µçš„å­¸ç”Ÿäººæ•¸ï¼Ÿ

**A:** ç›®å‰ç‰ˆæœ¬çš„ã€ŒMaximum Students (æœ€å¤§å­¸ç”Ÿæ•¸)ã€æ¬„ä½åƒ…ç”¨æ–¼é¡¯ç¤ºï¼Œä¸æœƒè‡ªå‹•é™åˆ¶é ç´„ã€‚æœªä¾†ç‰ˆæœ¬æœƒåŠ å…¥è‡ªå‹•æª¢æŸ¥åŠŸèƒ½ã€‚

è‡¨æ™‚è§£æ±ºæ–¹æ¡ˆï¼š
- ç®¡ç†å“¡å®šæœŸæŸ¥çœ‹ `/admin/schedule/sessions`
- æ‰‹å‹•ç¢ºèªæ¯å€‹æ™‚æ®µçš„é ç´„äººæ•¸
- è¶…éä¸Šé™æ™‚è¯çµ¡å­¸ç”Ÿèª¿æ•´

### Q4: å¯ä»¥ä¸€æ¬¡å»ºç«‹å¤šå€‹é‡è¤‡çš„ç­è¡¨å—ï¼Ÿ

**A:** ç›®å‰éœ€è¦æ‰‹å‹•é€ä¸€å»ºç«‹ã€‚æœªä¾†å¯è€ƒæ…®é–‹ç™¼ï¼š
- æ‰¹æ¬¡å»ºç«‹åŠŸèƒ½
- å®šæœŸæ’ç¨‹è‡ªå‹•å»ºç«‹
- ç¯„æœ¬åŠŸèƒ½

è‡¨æ™‚è§£æ±ºæ–¹æ¡ˆï¼š
- å»ºç«‹ç¬¬ä¸€å€‹ç­è¡¨å¾Œï¼Œä½¿ç”¨ã€ŒEditã€é€²å…¥è¡¨å–®
- è¤‡è£½ URLï¼Œå°‡ `/edit` æ”¹ç‚º `/add`
- å¤§éƒ¨åˆ†æ¬„ä½æœƒä¿ç•™ï¼Œåªéœ€ä¿®æ”¹æ—¥æœŸ

### Q5: å¦‚ä½•åŒ¯å‡ºç­è¡¨è³‡æ–™ï¼Ÿ

**A:** å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Drush**
```bash
ddev drush sqlq "SELECT * FROM tutor_schedule_slot" > schedule.csv
ddev drush sqlq "SELECT * FROM tutor_session" > sessions.csv
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ Views æ¨¡çµ„**ï¼ˆéœ€è¦å¦å¤–å®‰è£ï¼‰
1. å•Ÿç”¨ Views æ¨¡çµ„
2. å»ºç«‹è‡ªè¨‚ View
3. ä½¿ç”¨ Views Data Export åŒ¯å‡º CSV

### Q6: å­¸ç”Ÿé ç´„å¾Œå¯ä»¥ä¿®æ”¹æ™‚é–“å—ï¼Ÿ

**A:** å¯ä»¥ï¼Œå­¸ç”Ÿæœ‰ã€ŒEdit own tutoring sessionsã€æ¬Šé™æ™‚ï¼š

1. å‰å¾€è§£é¡Œè¨˜éŒ„é é¢
2. é»æ“Šã€ŒEditã€
3. ä¿®æ”¹ã€ŒSession Date (è§£é¡Œæ—¥æœŸ)ã€
4. å„²å­˜

å»ºè­°ï¼šè¦æ±‚å­¸ç”Ÿè¯çµ¡è€å¸«ç¢ºèªå¾Œå†ä¿®æ”¹ã€‚

### Q7: å¦‚ä½•æ–°å¢æ›´å¤šç§‘ç›®é¸é …ï¼Ÿ

**A:** ç›®å‰ã€ŒSubject (ç§‘ç›®)ã€æ˜¯è‡ªç”±æ–‡å­—æ¬„ä½ã€‚å¦‚æœæƒ³è¦ä¸‹æ‹‰é¸å–®ï¼š

1. å‰å¾€ `/admin/structure/types/manage/tutor_schedule_slot/fields`ï¼ˆéœ€è¦ç®¡ç†æ¬Šé™ï¼‰
2. ç·¨è¼¯ã€ŒSubjectã€æ¬„ä½
3. å°‡æ¬„ä½é¡å‹æ”¹ç‚ºã€ŒList (text)ã€
4. è¨­å®šå…è¨±çš„å€¼åˆ—è¡¨

### Q8: ç³»çµ±æœƒç™¼é€æé†’é€šçŸ¥å—ï¼Ÿ

**A:** ç›®å‰ç‰ˆæœ¬ä¸åŒ…å«é€šçŸ¥åŠŸèƒ½ã€‚æœªä¾†å¯ä»¥æ•´åˆï¼š
- Email é€šçŸ¥æ¨¡çµ„
- Rules æ¨¡çµ„è¨­å®šè‡ªå‹•é€šçŸ¥è¦å‰‡
- é ç´„å‰ä¸€å¤©è‡ªå‹•æé†’

---

## é€²éšåŠŸèƒ½

### 1. æ•´åˆ Views æ¨¡çµ„å»ºç«‹è‡ªè¨‚æª¢è¦–

**ç›®æ¨™ï¼š** å»ºç«‹æ—¥æ›†æª¢è¦–æˆ–è‡ªè¨‚å ±è¡¨

**æ­¥é©Ÿï¼š**

1. å•Ÿç”¨ Views æ¨¡çµ„ï¼š`ddev drush en views views_ui -y`
2. å‰å¾€ `/admin/structure/views`
3. é»æ“Šã€ŒAdd viewã€
4. è¨­å®šï¼š
   - View name: Teacher Schedule Calendar
   - Show: Schedule Slots
   - Display format: Table æˆ– Calendarï¼ˆéœ€å®‰è£ Calendar æ¨¡çµ„ï¼‰
5. æ–°å¢æ¬„ä½ã€ç¯©é¸å™¨ã€æ’åº
6. å„²å­˜

### 2. è¨­å®šé¸å–®é€£çµ

**å°‡å¸¸ç”¨é é¢åŠ å…¥ä¸»é¸å–®ï¼š**

1. å‰å¾€ `/admin/structure/menu/manage/main`
2. é»æ“Šã€ŒAdd linkã€
3. è¨­å®šï¼š
   - Menu link title: é ç´„è§£é¡Œ
   - Link: /schedule/available
   - Weight: èª¿æ•´é †åº
4. å„²å­˜

### 3. å®¢è£½åŒ–æ¨£æ¿

**ä¿®æ”¹ç­è¡¨é¡¯ç¤ºæ¨£å¼ï¼š**

1. è¤‡è£½ `web/modules/custom/tutor_schedule/templates/tutor-schedule-slot.html.twig`
2. è²¼åˆ°ä½ˆæ™¯ä¸»é¡Œçš„ `templates/` ç›®éŒ„
3. ä¿®æ”¹ HTML çµæ§‹å’Œæ¨£å¼
4. æ¸…é™¤å¿«å–ï¼š`ddev drush cr`

---

## æŠ€è¡“æ”¯æ´

### æ¨¡çµ„è³‡è¨Š

- **æ¨¡çµ„åç¨±ï¼š** Tutor Schedule
- **ç‰ˆæœ¬ï¼š** 1.0.0
- **ç›¸å®¹æ€§ï¼š** Drupal 11.x
- **é–‹ç™¼è€…ï¼š** Claude Code

### æª”æ¡ˆä½ç½®

```
web/modules/custom/tutor_schedule/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Entity/              # å¯¦é«”å®šç¾©
â”‚   â”œâ”€â”€ Form/                # è¡¨å–®
â”‚   â”œâ”€â”€ Controller/          # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ Access/              # å­˜å–æ§åˆ¶
â”‚   â””â”€â”€ ListBuilder/         # åˆ—è¡¨å»ºæ§‹å™¨
â”œâ”€â”€ templates/               # Twig æ¨£æ¿
â”œâ”€â”€ tutor_schedule.info.yml
â”œâ”€â”€ tutor_schedule.permissions.yml
â”œâ”€â”€ tutor_schedule.routing.yml
â”œâ”€â”€ tutor_schedule.links.menu.yml
â”œâ”€â”€ tutor_schedule.links.action.yml
â””â”€â”€ tutor_schedule.module
```

### é™¤éŒ¯æŒ‡ä»¤

```bash
# æ¸…é™¤å¿«å–
ddev drush cr

# æª¢æŸ¥æ¬Šé™
ddev drush eval "print_r(array_keys(\Drupal::service('user.permissions')->getPermissions()));" | grep tutor

# æª¢æŸ¥è·¯ç”±
ddev drush eval "print_r(\Drupal::service('router.route_provider')->getRoutesByPattern('/admin/schedule/slots')->all());"

# æª¢æŸ¥è³‡æ–™è¡¨
ddev drush sqlq "DESCRIBE tutor_schedule_slot"
ddev drush sqlq "DESCRIBE tutor_session"

# æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ
ddev drush watchdog:show --extended
```

### å¸¸è¦‹éŒ¯èª¤è™•ç†

**éŒ¯èª¤ï¼šAccess denied**
- æª¢æŸ¥ä½¿ç”¨è€…è§’è‰²å’Œæ¬Šé™è¨­å®š
- ç¢ºèªè·¯ç”±çš„æ¬Šé™éœ€æ±‚

**éŒ¯èª¤ï¼šPage not found**
- æ¸…é™¤å¿«å–ï¼š`ddev drush cr`
- æª¢æŸ¥è·¯ç”±æ˜¯å¦æ­£ç¢ºè¨»å†Š

**éŒ¯èª¤ï¼šEntity type not found**
- é‡æ–°å®‰è£æ¨¡çµ„ï¼š
  ```bash
  ddev drush pm:uninstall tutor_schedule
  ddev drush en tutor_schedule -y
  ```

### è¯çµ¡è³‡è¨Š

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
1. æŸ¥çœ‹æœ¬æ“ä½œæ‰‹å†Šçš„å¸¸è¦‹å•é¡Œç« ç¯€
2. æª¢è¦–æ¨¡çµ„çš„ CLAUDE.md äº†è§£æŠ€è¡“ç´°ç¯€
3. æäº¤å•é¡Œåˆ°å°ˆæ¡ˆçš„ issue tracker

---

## é™„éŒ„

### A. æ¬Šé™å°ç…§è¡¨

| æ“ä½œ | ç®¡ç†å“¡ | è€å¸« | å­¸ç”Ÿ | è¨ªå®¢ |
|------|--------|------|------|------|
| å»ºç«‹ç­è¡¨æ™‚æ®µ | âœ… | âœ… | âŒ | âŒ |
| ç·¨è¼¯è‡ªå·±çš„ç­è¡¨ | âœ… | âœ… | âŒ | âŒ |
| ç·¨è¼¯ä»–äººçš„ç­è¡¨ | âœ… | âŒ | âŒ | âŒ |
| åˆªé™¤ç­è¡¨ | âœ… | âœ…(own) | âŒ | âŒ |
| æŸ¥çœ‹å·²ç™¼å¸ƒç­è¡¨ | âœ… | âœ… | âœ… | âœ… |
| æŸ¥çœ‹æœªç™¼å¸ƒç­è¡¨ | âœ… | âœ…(own) | âŒ | âŒ |
| å»ºç«‹è§£é¡Œè¨˜éŒ„ | âœ… | âœ… | âœ… | âŒ |
| ç·¨è¼¯è§£é¡Œè¨˜éŒ„ | âœ… | âœ…(related) | âœ…(own) | âŒ |
| æŸ¥çœ‹è§£é¡Œè¨˜éŒ„ | âœ… | âœ…(related) | âœ…(own) | âŒ |

### B. è³‡æ–™è¡¨çµæ§‹

#### tutor_schedule_slot

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| id | int | ä¸»éµ |
| uuid | varchar(128) | UUID |
| tutor_id | int | è€å¸« IDï¼ˆé—œè¯ users è¡¨ï¼‰ |
| title | varchar(255) | æ¨™é¡Œ |
| schedule_date | varchar(20) | ç­è¡¨æ—¥æœŸ |
| start_time | varchar(20) | é–‹å§‹æ™‚é–“ |
| end_time | varchar(20) | çµæŸæ™‚é–“ |
| classroom | varchar(100) | æ•™å®¤ |
| subject | varchar(100) | ç§‘ç›® |
| max_students | int | æœ€å¤§å­¸ç”Ÿæ•¸ |
| status | tinyint | ç™¼å¸ƒç‹€æ…‹ |
| created | int | å»ºç«‹æ™‚é–“ |
| changed | int | ä¿®æ”¹æ™‚é–“ |

#### tutor_session

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| id | int | ä¸»éµ |
| uuid | varchar(128) | UUID |
| title | varchar(255) | æ¨™é¡Œ |
| slot_id | int | é—œè¯ç­è¡¨ ID |
| student_id | int | å­¸ç”Ÿ ID |
| tutor_id | int | è€å¸« ID |
| session_date | varchar(20) | è§£é¡Œæ—¥æœŸ |
| duration | int | æ™‚é•·ï¼ˆåˆ†é˜ï¼‰ |
| topic__value | longtext | å•é¡Œä¸»é¡Œ |
| notes__value | longtext | è§£é¡Œç­†è¨˜ |
| status | varchar(255) | ç‹€æ…‹ |
| created | int | å»ºç«‹æ™‚é–“ |
| changed | int | ä¿®æ”¹æ™‚é–“ |

### C. URL å¿«é€Ÿåƒè€ƒ

| é é¢ | URL | æ¬Šé™éœ€æ±‚ |
|------|-----|----------|
| ç®¡ç†ç­è¡¨åˆ—è¡¨ | `/admin/schedule/slots` | view all tutor_schedule_slot |
| æ–°å¢ç­è¡¨ | `/admin/schedule/slot/add` | create tutor_schedule_slot |
| ç·¨è¼¯ç­è¡¨ | `/admin/schedule/slot/{id}/edit` | edit own/any tutor_schedule_slot |
| åˆªé™¤ç­è¡¨ | `/admin/schedule/slot/{id}/delete` | delete own/any tutor_schedule_slot |
| æŸ¥çœ‹ç­è¡¨ | `/schedule/slot/{id}` | view published/own/all |
| è€å¸«å€‹äººç­è¡¨ | `/schedule/my-schedule` | view own tutor_schedule_slot |
| å­¸ç”Ÿå¯é ç´„æ™‚æ®µ | `/schedule/available` | view published tutor_schedule_slot |
| ç®¡ç†è§£é¡Œè¨˜éŒ„ | `/admin/schedule/sessions` | view all tutor_session |
| æ–°å¢è§£é¡Œè¨˜éŒ„ | `/schedule/session/add` | create tutor_session |
| æŸ¥çœ‹è§£é¡Œè¨˜éŒ„ | `/schedule/session/{id}` | view own tutor_session |
| æ¬Šé™è¨­å®š | `/admin/people/permissions` | administer permissions |
| è§’è‰²ç®¡ç† | `/admin/people/roles` | administer permissions |

---

## ç‰ˆæœ¬æ­·å²

### v1.0.0 (ç›®å‰ç‰ˆæœ¬)
- âœ… åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- âœ… ç­è¡¨æ™‚æ®µç®¡ç†åŠŸèƒ½
- âœ… è§£é¡Œè¨˜éŒ„è¿½è¹¤åŠŸèƒ½
- âœ… å®Œæ•´çš„æ¬Šé™æ§åˆ¶ç³»çµ±
- âœ… è€å¸«å’Œå­¸ç”Ÿå€‹äººåŒ–æª¢è¦–

### æœªä¾†è¨ˆåŠƒåŠŸèƒ½

- ğŸ“… æ—¥æ›†æª¢è¦–æ•´åˆ
- ğŸ“§ Email é€šçŸ¥ç³»çµ±
- ğŸ“Š çµ±è¨ˆå ±è¡¨åŠŸèƒ½
- ğŸ”„ æ‰¹æ¬¡å»ºç«‹é‡è¤‡ç­è¡¨
- ğŸ”” é ç´„æé†’åŠŸèƒ½
- ğŸ“± æ‰‹æ©Ÿç‰ˆå„ªåŒ–
- ğŸ” é€²éšæœå°‹å’Œç¯©é¸
- ğŸ“¤ è³‡æ–™åŒ¯å‡ºåŠŸèƒ½

---

**æœ€å¾Œæ›´æ–°ï¼š** 2024å¹´12æœˆ19æ—¥
